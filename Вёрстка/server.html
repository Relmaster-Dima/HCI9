<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PartyUP | –°–µ—Ä–≤–µ—Ä –∏–≤–∞–Ω —Ñ—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫–æ–≤</title>
    <style>
        :root {
            --bg-servers: #1e1f22;
            --bg-channels: #2b2d31;
            --bg-chat: #313338;
            --bg-user-panel: #232428;
            --text-primary: #f2f3f5;
            --text-muted: #949ba4;
            --brand-gradient: linear-gradient(135deg, #a450ff, #00b0f4);
            --accent-green: #23a559;
            --modifier-selected: rgba(78, 80, 88, 0.6);
            --modifier-hover: rgba(78, 80, 88, 0.3);
        }

        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-chat); color: var(--text-primary);
            overflow: hidden;
        }

        .app-container { display: flex; height: 100vh; }

        /* --- 1. –ü–ê–ù–ï–õ–¨ –°–ï–†–í–ï–†–û–í (–°–ª–µ–≤–∞) --- */
        .sidebar-servers {
            width: 72px; background: var(--bg-servers);
            display: flex; flex-direction: column; align-items: center; padding-top: 12px; gap: 8px;
        }

        .server-icon {
            width: 48px; height: 48px; border-radius: 50%;
            background: #313338; display: flex; justify-content: center; align-items: center;
            cursor: pointer; transition: 0.2s; position: relative; font-size: 20px;
        }

        .server-icon.logo { background: var(--brand-gradient); border-radius: 16px; color: white; font-weight: bold; font-size: 14px; }
        .server-icon.active::before {
            content: ""; position: absolute; left: -12px; width: 4px; height: 40px; background: white; border-radius: 0 4px 4px 0;
        }
        .server-icon:hover { border-radius: 16px; background: var(--accent-green); color: white; }

        /* --- 2. –ü–ê–ù–ï–õ–¨ –ö–ê–ù–ê–õ–û–í –ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø --- */
        .sidebar-channels {
            width: 240px; background: var(--bg-channels); display: flex; flex-direction: column;
        }

        .header-server {
            height: 48px; padding: 0 16px; display: flex; align-items: center; justify-content: space-between;
            font-weight: bold; border-bottom: 1px solid rgba(0,0,0,0.2); cursor: pointer;
        }

        .channel-list { flex: 1; overflow-y: auto; padding: 10px 0; }
        .channel-category { padding: 16px 8px 4px 16px; font-size: 12px; font-weight: bold; color: var(--text-muted); text-transform: uppercase; }
        .channel-item {
            margin: 2px 8px; padding: 6px 8px; border-radius: 4px; color: var(--text-muted);
            cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 15px;
        }
        .channel-item:hover { background: var(--modifier-hover); color: var(--text-primary); }
        .channel-item.active { background: var(--modifier-selected); color: white; }

        /* –ü–∞–Ω–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–°–Ω–∏–∑—É —Å–ª–µ–≤–∞) */
        .user-panel {
            height: 52px; background-color: var(--bg-user-panel); display: flex; align-items: center; padding: 0 8px; gap: 4px;
        }
        .user-info {
            display: flex; align-items: center; gap: 8px; flex: 1; padding: 2px 4px; border-radius: 4px; cursor: pointer;
        }
        .user-info:hover { background: rgba(255,255,255,0.1); }
        .avatar-wrapper { position: relative; width: 32px; height: 32px; }
        .avatar-main { width: 100%; height: 100%; background: #5865f2; border-radius: 50%; }
        .status-dot { position: absolute; bottom: -2px; right: -2px; width: 10px; height: 10px; background: var(--accent-green); border: 3px solid var(--bg-user-panel); border-radius: 50%; }
        .username { font-size: 13px; font-weight: 600; display: block; }
        .status-text { font-size: 11px; color: var(--text-muted); }

        .control-btn { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 4px; cursor: pointer; color: #dbdee1; }
        .control-btn:hover { background: rgba(255,255,255,0.1); color: #f2f3f5; }

        /* --- 3. –û–°–ù–û–í–ù–ê–Ø –ó–û–ù–ê –ß–ê–¢–ê --- */
        .chat-area { flex: 1; display: flex; flex-direction: column; background: var(--bg-chat); }
        .chat-header { height: 48px; display: flex; align-items: center; padding: 0 16px; border-bottom: 1px solid rgba(0,0,0,0.2); font-weight: bold; }
        .chat-messages { flex: 1; overflow-y: auto; padding: 20px; }

        /* –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–ª–æ–∫ */
        .welcome-section { margin-top: 40px; margin-bottom: 30px; }
        .welcome-section h1 { font-size: 32px; margin: 0; }
        .welcome-section p { color: var(--text-muted); margin-top: 8px; }

        .message-row { 
            display: flex; 
            gap: 16px; 
            margin-top: 20px; 
            position: relative;
        }
        .message-row:hover .msg-actions-btn {
            opacity: 1;
        }
        .msg-avatar { width: 40px; height: 40px; border-radius: 50%; background: #e67e22; flex-shrink: 0; }
        .msg-content { flex: 1; position: relative; }
        .msg-user { font-weight: bold; font-size: 14px; margin-bottom: 4px; }
        .msg-user span { color: var(--text-muted); font-size: 11px; font-weight: normal; margin-left: 8px; }
        .msg-text { font-size: 15px; color: #dbdee1; line-height: 1.4; }
        .msg-attachment { margin-top: 8px; max-width: 500px; border-radius: 8px; overflow: hidden; border: 1px solid #222; }
        
        /* –ö–Ω–æ–ø–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π —Å–æ–æ–±—â–µ–Ω–∏—è */
        .msg-actions-btn {
            position: absolute;
            right: -8px;
            top: 0;
            width: 24px;
            height: 24px;
            background: var(--bg-chat);
            border: none;
            border-radius: 4px;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s, background 0.2s;
            font-size: 18px;
            padding: 0;
            line-height: 1;
        }
        .msg-actions-btn:hover {
            background: var(--modifier-hover);
            color: var(--text-primary);
        }
        
        /* –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é */
        .context-menu {
            position: fixed;
            background: #2b2d31;
            border-radius: 4px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
            min-width: 220px;
            padding: 8px;
            z-index: 1000;
            display: none;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }
        .context-menu.active {
            display: block;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ —Ä–µ–∞–∫—Ü–∏–π */
        .reaction-buttons {
            display: flex;
            gap: 4px;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .reaction-btn {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: transform 0.1s;
        }
        .reaction-btn:hover {
            transform: scale(1.1);
        }
        .reaction-btn.blue { background: #5865f2; }
        .reaction-btn.orange { background: #faa61a; }
        .reaction-btn.white { background: #ffffff; }
        .reaction-btn.red { background: #f04747; }
        
        /* –ü—É–Ω–∫—Ç—ã –º–µ–Ω—é */
        .menu-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            color: var(--text-primary);
            font-size: 14px;
            transition: background 0.15s;
        }
        .menu-item:hover {
            background: var(--modifier-hover);
        }
        .menu-item.danger {
            color: #f04747;
        }
        .menu-item.danger:hover {
            background: rgba(240, 71, 71, 0.1);
        }
        .menu-item-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 8px;
        }

        .chat-input-area { padding: 0 20px 24px; }
        .chat-input-container { background: #383a40; padding: 11px 16px; border-radius: 8px; color: var(--text-muted); font-size: 15px; }

        /* --- 4. –°–ü–ò–°–û–ö –£–ß–ê–°–¢–ù–ò–ö–û–í (–°–ø—Ä–∞–≤–∞) --- */
        .sidebar-members { width: 240px; background: var(--bg-channels); padding: 20px 8px; }
        .member-row { display: flex; align-items: center; gap: 12px; padding: 6px 8px; border-radius: 4px; cursor: pointer; color: var(--text-muted); }
        .member-row:hover { background: var(--modifier-hover); color: var(--text-primary); }
        .member-avatar { width: 32px; height: 32px; border-radius: 50%; background: #23a559; }

    </style>
</head>
<body>

<div class="app-container">
    <aside class="sidebar-servers">
        <div class="server-icon logo" onclick="window.location.href='Party.html'">P-UP</div>
        <div style="width: 32px; height: 2px; background: #35363c; margin: 4px 0;"></div>
        <div class="server-icon active">üõ†Ô∏è</div>
        <div class="server-icon" onclick="window.location.href='server.html'">üéÆ</div>
        <div class="server-icon" onclick="window.location.href='server.html'">üé®</div>
        <div class="server-icon" style="color: var(--accent-green);" onclick="window.location.href='create-server.html'">+</div>
    </aside>

    <aside class="sidebar-channels">
        <div class="header-server" onclick="window.location.href='settings-server.html'" style="cursor: pointer;">–°–µ—Ä–≤–µ—Ä –∏–≤–∞–Ω —Ñ—Ä–µ–∑–µ... <span>‚åµ</span></div>
        <div class="channel-list">
            <div class="channel-item">üìÖ –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</div>
            <div class="channel-category">–¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã</div>
            <div class="channel-item active"># –æ–±—â–µ–µ</div>
            <div class="channel-item"># –∫–ª–∏–ø—ã-–∏-–æ—Å–Ω–æ–≤–Ω—ã–µ</div>
            <div class="channel-category">–ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã</div>
            <div class="channel-item" onclick="window.location.href='vois.html'">üîä –õ–æ–±–±–∏</div>
            <div class="channel-item" onclick="window.location.href='vois.html'">üîä –ò–≥—Ä—ã</div>
        </div>

        <div class="user-panel">
            <div class="user-info">
                <div class="avatar-wrapper">
                    <div class="avatar-main"></div>
                    <div class="status-dot"></div>
                </div>
                <div class="user-details">
                    <span class="username">Ded_12_let</span>
                    <span class="status-text">–í —Å–µ—Ç–∏</span>
                </div>
            </div>
            <div class="user-controls">
                <div class="control-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24"><path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/><path fill="currentColor" d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/></svg>
                </div>
                <div class="control-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12v7c0 1.1.9 2 2 2h3v-8H4v-1c0-4.41 3.59-8 8-8s8 3.59 8 8v1h-3v8h3c1.1 0 2-.9 2-2v-7c0-5.52-4.48-10-10-10z"/></svg>
                </div>
                <div class="control-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24"><path fill="currentColor" d="M19.14 12.94c.04-.3.06-.61.06-.94s-.02-.64-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.3-.06.61-.06.94s.02.64.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.21.07-.47-.12-.61l-2.03-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
                </div>
            </div>
        </div>
    </aside>

    <main class="chat-area">
        <div class="chat-header"><span>#</span> –æ–±—â–µ–µ</div>
        <div class="chat-messages">
            <div class="welcome-section">
                <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä<br>–°–µ—Ä–≤–µ—Ä –∏–≤–∞–Ω —Ñ—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫–æ–≤</h1>
                <p>–≠—Ç–æ –Ω–∞—á–∞–ª–æ –∏—Å—Ç–æ—Ä–∏–∏ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.</p>
            </div>

            <div class="message-row">
                <div class="msg-avatar"></div>
                <div class="msg-content">
                    <div class="msg-user">–∏–≤–∞–Ω —Ñ—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫–æ–≤ <span>–°–µ–≥–æ–¥–Ω—è, –≤ 17:26</span></div>
                    <div class="msg-text">–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç! –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞—à–µ–≥–æ —Å—É–¥–Ω–∞ –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ.</div>
                    <div class="msg-attachment">
                        <img src="https://via.placeholder.com/600x300/1e1f22/f2f3f5?text=PartyUP+Ship+Project" alt="img" style="width:100%; display:block;">
                    </div>
                    <button class="msg-actions-btn" onclick="openContextMenu(event, this)">‚ãØ</button>
                </div>
            </div>
            
            <div class="message-row">
                <div class="msg-avatar" style="background: #5865f2;"></div>
                <div class="msg-content">
                    <div class="msg-user">Relmaster <span>–°–µ–≥–æ–¥–Ω—è, –≤ 17:28</span></div>
                    <div class="msg-text">–≠—Ç–æ —Å–ø–∞–º! –ö—É–ø–∏—Ç–µ –º–æ–∏ –∫—É—Ä—Å—ã –ø–æ –∑–∞—Ä–∞–±–æ—Ç–∫—É! –°—Å—ã–ª–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ!!!</div>
                    <button class="msg-actions-btn" onclick="openContextMenu(event, this)">‚ãØ</button>
                </div>
            </div>
        </div>
        <div class="chat-input-area">
            <div class="chat-input-container">–ù–∞–ø–∏—Å–∞—Ç—å –≤ #–æ–±—â–µ–µ</div>
        </div>
    </main>

    <aside class="sidebar-members">
        <div class="channel-category">–í —Å–µ—Ç–∏ ‚Äî 2</div>
        <div class="member-row">
            <div class="member-avatar"></div>
            <span>Ded_12_let</span>
        </div>
        <div class="member-row">
            <div class="member-avatar" style="background: #a450ff;"></div>
            <span>Relmaster</span>
        </div>
        <div class="channel-category" style="margin-top: 20px;">–ù–µ –≤ —Å–µ—Ç–∏ ‚Äî 1</div>
        <div class="member-row" style="opacity: 0.5;">
            <div class="member-avatar" style="background: #4f545c;"></div>
            <span>–∏–≤–∞–Ω —Ñ—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫–æ–≤</span>
        </div>
    </aside>
</div>

<!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é -->
<div class="context-menu" id="contextMenu">
    <div class="reaction-buttons">
        <button class="reaction-btn blue" title="üëç">üëç</button>
        <button class="reaction-btn orange" title="‚≠ê">‚≠ê</button>
        <button class="reaction-btn white" title="üëè">üëè</button>
        <button class="reaction-btn red" title="‚ù§Ô∏è">‚ù§Ô∏è</button>
    </div>
    <div class="menu-item" onclick="addReaction()">
        <span>–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é</span>
        <span class="menu-item-icon">‚Üí</span>
    </div>
    <div class="menu-item" onclick="replyMessage()">
        <span>–û—Ç–≤–µ—Ç–∏—Ç—å</span>
        <span class="menu-item-icon">‚Ü∂</span>
    </div>
    <div class="menu-item" onclick="forwardMessage()">
        <span>–ü–µ—Ä–µ—Å–ª–∞—Ç—å</span>
        <span class="menu-item-icon">‚Ü∑</span>
    </div>
    <div class="menu-item" onclick="copyText()">
        <span>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç</span>
        <span class="menu-item-icon">üìÑ</span>
    </div>
    <div class="menu-item" onclick="pinMessage()">
        <span>–ó–∞–∫—Ä–µ–ø–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
        <span class="menu-item-icon">üìå</span>
    </div>
    <div class="menu-item" onclick="openApps()">
        <span>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è</span>
        <span class="menu-item-icon">‚Üí</span>
    </div>
    <div class="menu-item" onclick="markUnread()">
        <span>–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ</span>
        <span class="menu-item-icon">üîî</span>
    </div>
    <div class="menu-item" onclick="copyLink()">
        <span>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
        <span class="menu-item-icon">üîó</span>
    </div>
    <div class="menu-item" onclick="readAloud()">
        <span>–ó–∞—á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
        <span class="menu-item-icon">üîä</span>
    </div>
    <div class="menu-item danger" onclick="reportMessage()">
        <span>–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
        <span class="menu-item-icon">üö©</span>
    </div>
</div>

<script>
    let currentMessageRow = null;
    
    function openContextMenu(event, button) {
        event.stopPropagation();
        event.preventDefault();
        
        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        currentMessageRow = button.closest('.message-row');
        
        // –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –º–µ–Ω—é, –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ
        const existingMenu = document.getElementById('contextMenu');
        if (existingMenu.classList.contains('active')) {
            existingMenu.classList.remove('active');
        }
        
        const menu = document.getElementById('contextMenu');
        const rect = button.getBoundingClientRect();
        const menuWidth = 220;
        const menuHeight = 400; // –ü—Ä–∏–º–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –º–µ–Ω—é
        
        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–∞ –æ—Ç –∫–Ω–æ–ø–∫–∏
        let left = rect.right + 8;
        let top = rect.top;
        
        // –ï—Å–ª–∏ –º–µ–Ω—é –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π —ç–∫—Ä–∞–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–≤–∞
        if (left + menuWidth > window.innerWidth) {
            left = rect.left - menuWidth - 8;
        }
        
        // –ï—Å–ª–∏ –º–µ–Ω—é –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –Ω–∏–∂–Ω–∏–π –∫—Ä–∞–π, —Å–¥–≤–∏–≥–∞–µ–º –≤–≤–µ—Ä—Ö
        if (top + menuHeight > window.innerHeight) {
            top = window.innerHeight - menuHeight - 8;
        }
        
        menu.style.left = left + 'px';
        menu.style.top = top + 'px';
        menu.classList.add('active');
        
        // –ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        setTimeout(() => {
            document.addEventListener('click', closeMenuOnClick);
        }, 0);
    }
    
    function closeMenuOnClick(event) {
        const menu = document.getElementById('contextMenu');
        if (!menu.contains(event.target)) {
            menu.classList.remove('active');
            document.removeEventListener('click', closeMenuOnClick);
        }
    }
    
    function addReaction() {
        console.log('–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é');
        document.getElementById('contextMenu').classList.remove('active');
    }
    
    function replyMessage() {
        console.log('–û—Ç–≤–µ—Ç–∏—Ç—å');
        document.getElementById('contextMenu').classList.remove('active');
    }
    
    function forwardMessage() {
        console.log('–ü–µ—Ä–µ—Å–ª–∞—Ç—å');
        document.getElementById('contextMenu').classList.remove('active');
    }
    
    function copyText() {
        if (currentMessageRow) {
            const text = currentMessageRow.querySelector('.msg-text')?.textContent || '';
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    console.log('–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω');
                });
            } else {
                // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
            }
        }
        document.getElementById('contextMenu').classList.remove('active');
    }
    
    function pinMessage() {
        console.log('–ó–∞–∫—Ä–µ–ø–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ');
        document.getElementById('contextMenu').classList.remove('active');
    }
    
    function openApps() {
        console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è');
        document.getElementById('contextMenu').classList.remove('active');
    }
    
    function markUnread() {
        console.log('–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ');
        document.getElementById('contextMenu').classList.remove('active');
    }
    
    function copyLink() {
        const link = window.location.href;
        navigator.clipboard.writeText(link).then(() => {
            console.log('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞');
        });
        document.getElementById('contextMenu').classList.remove('active');
    }
    
    function readAloud() {
        console.log('–ó–∞—á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ');
        document.getElementById('contextMenu').classList.remove('active');
    }
    
    function reportMessage() {
        window.location.href = 'report.html';
    }
</script>

</body>
</html>